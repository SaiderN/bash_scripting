## Арифметические операции: подробнее
**Для работы с числами есть несколько способов:**

```bash
x=5
y=3

# Способ 1: $(( ... )) (основной, рекомендуется)
sum=$(($x + $y))       # 8
diff=$((x - y))        # 2. Обрати внимание: знак $ перед именами внутри (()) можно опустить!
mult=$((x * y))        # 15
div=$((x / y))         # 1 (целочисленное деление!)

# Способ 2: let
let "sum = x + y"      # 8
let "x++"              # Инкремент. Теперь x=6

# Способ 3: expr (устаревший, но встречается)
sum=`expr $x + $y`     # 8 (используются обратные кавычки)
```

**Работа со строками**

```bash
text="Hello World"

# Длина строки
echo ${#text}          # 11

# Конкатенация (сложение строк)
greet="Hello, "$name"!" # Или: greet="Hello, ${name}!"

# Извлечение подстроки
echo ${text:0:5}       # "Hello" (с позиции 0 взять 5 символов)
echo ${text:6}         # "World" (с позиции 6 до конца)

# Замена в строке (только первое вхождение)
echo ${text/World/Bash} # "Hello Bash"
# Замена всех вхождений
echo ${text//l/_}      # "He__o Wor_d"
```

**Коды возврата и булева логика**
В Bash "истина" — это код возврата 0, "ложь" — любое число от 1 до 255.

```bash
# Команда 'true' всегда возвращает 0 (успех), 'false' всегда возвращает 1 (ошибка).
if true; then
  echo "Это всегда выполнится"
fi

# Проверка условий осуществляется командами test или [[ ... ]]
x=10
y=20

if [[ $x -lt $y ]]; then  # -lt = less than (<)
  echo "$x меньше $y"
fi

# Логические операции И (&&), ИЛИ (||)
[[ $x -gt 5 ]] && [[ $y -lt 30 ]] && echo "Оба условия истинны"

# Проверка кода возврата последней команды
ls /some/nonexistent/directory
if [[ $? -ne 0 ]]; then  # $? содержит код возврата. -ne = not equal (!=)
  echo "Последняя команда завершилась с ошибкой."
fi
```

**Область видимости (Scope)**
По умолчанию переменные глобальны. Чтобы сделать переменную локальной для функции, используйте ключевое слово `local`.

```bash
global_var="I am global"

my_function() {
  local local_var="I am local"
  global_var="Changed inside function"
  echo "Inside: $local_var, $global_var"
}

my_function
echo "Outside: $local_var, $global_var"
# Выведет:
# Inside: I am local, Changed inside function
# Outside: , Changed inside function
# (local_var пуста, так как она существовала только внутри функции)
```
